import json
import matplotlib.pyplot as plt
from handler import find_anomalies

input = [
    126.30843323110004,
    125.90704785909998,
    123.77827356319996,
    124.61064422660004,
    143.83018003970005,
    155.50300831680002,
    163.8581434656,
    142.40110731169997,
    132.00882793939996,
    131.1396688246,
    129.9334419214,
    133.461537981,
    135.1727848202,
    135.0900600333,
    134.47826078600002,
    -2524.864039299901,
    126.92146412379998,
    127.35431133719993,
    127.91617443950003,
    127.99325926250005,
    128.29912189410007,
    128.30770764619996,
    128.13196874519997,
    124.98659907259997,
    124.90488770189998,
    129.10324569839992,
    129.06406092079996,
    129.83987927670006,
    129.46431834159998,
    130.87352106979998,
    127.68007156949994,
    127.7108330625,
    133.98233439749998,
    134.04695733210002,
    132.61364189279996,
    130.9814705155,
    130.21461580650003,
    128.34536257180002,
    127.86307301049997,
    130.7593651499,
    130.0386013296,
    129.04806220810005,
    130.1262146984,
    129.44738367809998,
    126.76372179169996,
    126.74464419019999,
    1255.3534895845999,
    129.66144534929992,
    130.23791705379995,
    131.87692430730002,
    128.9623581152,
    127.9884353332,
    128.12799836629995,
    129.7738019603,
    130.96591744209996,
    131.11094696829997,
    132.1084510802,
    130.99750775549995,
    129.45759829289995,
    128.51817476819997,
    129.68348545039998,
    128.65818999439998,
    128.52876099159994,
    128.51437037189993,
    128.322017326,
    128.39579906269995,
    128.33170977139997,
    128.32242256470002,
    128.83207367159994,
    128.7426634338,
    128.60646685409995,
    129.6918606117,
    128.55694966489995,
    127.53337712589993,
    131.46485236419994,
    130.77317465159993,
    1483.5703559754,
    131.4585079354,
    148.98215427609998,
    135.8705966331,
    131.9148222832,
    131.04480562400002,
    137.4296155896,
    136.7590929087,
    137.34712278610002,
    137.954785573,
    137.23075386799997,
    136.25037431009997,
    139.94364296329996,
    137.72842937449997,
    138.7662271642,
    141.1326951628,
    143.6238252641,
    136.23851037269998,
    136.19702304489996,
    149.2338965016,
    145.91529763959997,
    143.76951457499993,
    149.50112714319997,
    144.07613694650001,
    143.8389729256,
    143.7618048153,
    144.50224846380002,
    211.14227321540008,
    316.75351459420006,
    224.51182274860008,
    164.81122572480018,
    941.1909166790999,
    158.52642511709988,
    172.04712442120004,
    173.5891997996001,
    135.21545511909994,
    136.10045251400004,
    134.61587749169993,
    134.2650247379,
    134.3966074006999,
    136.33440979529996,
    141.86962500959996,
    139.1520111839,
    155.17840842179993,
    138.31762129289996,
    137.20110926939998,
    136.33328717989997,
    180.0653902143001,
    135.16661846709997,
    49.63156567640006
]

anomalyData = find_anomalies(input)

plt.plot(list(map(lambda x: x['value'], anomalyData)))
plt.plot(list(map(lambda x: x['codisp'], anomalyData)))

plt.show()

print(json.dumps(anomalyData))
